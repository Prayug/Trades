{"ast":null,"code":"function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n\n  return t;\n}\n\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n\n  return e;\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nimport mapValues from 'lodash/mapValues';\nimport every from 'lodash/every';\nimport { getTicksOfScale, parseScale, checkDomainOfScale, getBandSizeOfAxis } from './ChartUtils';\nimport { findChildByType } from './ReactUtils';\nimport { getPercentValue } from './DataUtils';\nimport { Bar } from '../cartesian/Bar';\n/**\n * Calculate the scale function, position, width, height of axes\n * @param  {Object} props     Latest props\n * @param  {Object} axisMap   The configuration of axes\n * @param  {Object} offset    The offset of main part in the svg element\n * @param  {String} axisType  The type of axes, x-axis or y-axis\n * @param  {String} chartName The name of chart\n * @return {Object} Configuration\n */\n\nexport var formatAxisMap = function formatAxisMap(props, axisMap, offset, axisType, chartName) {\n  var width = props.width,\n      height = props.height,\n      layout = props.layout,\n      children = props.children;\n  var ids = Object.keys(axisMap);\n  var steps = {\n    left: offset.left,\n    leftMirror: offset.left,\n    right: width - offset.right,\n    rightMirror: width - offset.right,\n    top: offset.top,\n    topMirror: offset.top,\n    bottom: height - offset.bottom,\n    bottomMirror: height - offset.bottom\n  };\n  var hasBar = !!findChildByType(children, Bar);\n  return ids.reduce(function (result, id) {\n    var axis = axisMap[id];\n    var orientation = axis.orientation,\n        domain = axis.domain,\n        _axis$padding = axis.padding,\n        padding = _axis$padding === void 0 ? {} : _axis$padding,\n        mirror = axis.mirror,\n        reversed = axis.reversed;\n    var offsetKey = \"\".concat(orientation).concat(mirror ? 'Mirror' : '');\n    var calculatedPadding, range, x, y, needSpace;\n\n    if (axis.type === 'number' && (axis.padding === 'gap' || axis.padding === 'no-gap')) {\n      var diff = domain[1] - domain[0];\n      var smallestDistanceBetweenValues = Infinity;\n      var sortedValues = axis.categoricalDomain.sort();\n      sortedValues.forEach(function (value, index) {\n        if (index > 0) {\n          smallestDistanceBetweenValues = Math.min((value || 0) - (sortedValues[index - 1] || 0), smallestDistanceBetweenValues);\n        }\n      });\n      var smallestDistanceInPercent = smallestDistanceBetweenValues / diff;\n      var rangeWidth = axis.layout === 'vertical' ? offset.height : offset.width;\n\n      if (axis.padding === 'gap') {\n        calculatedPadding = smallestDistanceInPercent * rangeWidth / 2;\n      }\n\n      if (axis.padding === 'no-gap') {\n        var gap = getPercentValue(props.barCategoryGap, smallestDistanceInPercent * rangeWidth);\n        var halfBand = smallestDistanceInPercent * rangeWidth / 2;\n        calculatedPadding = halfBand - gap - (halfBand - gap) / rangeWidth * gap;\n      }\n    }\n\n    if (axisType === 'xAxis') {\n      range = [offset.left + (padding.left || 0) + (calculatedPadding || 0), offset.left + offset.width - (padding.right || 0) - (calculatedPadding || 0)];\n    } else if (axisType === 'yAxis') {\n      range = layout === 'horizontal' ? [offset.top + offset.height - (padding.bottom || 0), offset.top + (padding.top || 0)] : [offset.top + (padding.top || 0) + (calculatedPadding || 0), offset.top + offset.height - (padding.bottom || 0) - (calculatedPadding || 0)];\n    } else {\n      range = axis.range;\n    }\n\n    if (reversed) {\n      range = [range[1], range[0]];\n    }\n\n    var _parseScale = parseScale(axis, chartName, hasBar),\n        scale = _parseScale.scale,\n        realScaleType = _parseScale.realScaleType;\n\n    scale.domain(domain).range(range);\n    checkDomainOfScale(scale);\n    var ticks = getTicksOfScale(scale, _objectSpread(_objectSpread({}, axis), {}, {\n      realScaleType: realScaleType\n    }));\n\n    if (axisType === 'xAxis') {\n      needSpace = orientation === 'top' && !mirror || orientation === 'bottom' && mirror;\n      x = offset.left;\n      y = steps[offsetKey] - needSpace * axis.height;\n    } else if (axisType === 'yAxis') {\n      needSpace = orientation === 'left' && !mirror || orientation === 'right' && mirror;\n      x = steps[offsetKey] - needSpace * axis.width;\n      y = offset.top;\n    }\n\n    var finalAxis = _objectSpread(_objectSpread(_objectSpread({}, axis), ticks), {}, {\n      realScaleType: realScaleType,\n      x: x,\n      y: y,\n      scale: scale,\n      width: axisType === 'xAxis' ? offset.width : axis.width,\n      height: axisType === 'yAxis' ? offset.height : axis.height\n    });\n\n    finalAxis.bandSize = getBandSizeOfAxis(finalAxis, ticks);\n\n    if (!axis.hide && axisType === 'xAxis') {\n      steps[offsetKey] += (needSpace ? -1 : 1) * finalAxis.height;\n    } else if (!axis.hide) {\n      steps[offsetKey] += (needSpace ? -1 : 1) * finalAxis.width;\n    }\n\n    return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, id, finalAxis));\n  }, {});\n};\nexport var rectWithPoints = function rectWithPoints(_ref, _ref2) {\n  var x1 = _ref.x,\n      y1 = _ref.y;\n  var x2 = _ref2.x,\n      y2 = _ref2.y;\n  return {\n    x: Math.min(x1, x2),\n    y: Math.min(y1, y2),\n    width: Math.abs(x2 - x1),\n    height: Math.abs(y2 - y1)\n  };\n};\n/**\n * Compute the x, y, width, and height of a box from two reference points.\n * @param  {Object} coords     x1, x2, y1, and y2\n * @return {Object} object\n */\n\nexport var rectWithCoords = function rectWithCoords(_ref3) {\n  var x1 = _ref3.x1,\n      y1 = _ref3.y1,\n      x2 = _ref3.x2,\n      y2 = _ref3.y2;\n  return rectWithPoints({\n    x: x1,\n    y: y1\n  }, {\n    x: x2,\n    y: y2\n  });\n};\nexport var ScaleHelper = /*#__PURE__*/function () {\n  function ScaleHelper(scale) {\n    _classCallCheck(this, ScaleHelper);\n\n    this.scale = scale;\n  }\n\n  _createClass(ScaleHelper, [{\n    key: \"domain\",\n    get: function get() {\n      return this.scale.domain;\n    }\n  }, {\n    key: \"range\",\n    get: function get() {\n      return this.scale.range;\n    }\n  }, {\n    key: \"rangeMin\",\n    get: function get() {\n      return this.range()[0];\n    }\n  }, {\n    key: \"rangeMax\",\n    get: function get() {\n      return this.range()[1];\n    }\n  }, {\n    key: \"bandwidth\",\n    get: function get() {\n      return this.scale.bandwidth;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(value) {\n      var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          bandAware = _ref4.bandAware,\n          position = _ref4.position;\n\n      if (value === undefined) {\n        return undefined;\n      }\n\n      if (position) {\n        switch (position) {\n          case 'start':\n            {\n              return this.scale(value);\n            }\n\n          case 'middle':\n            {\n              var offset = this.bandwidth ? this.bandwidth() / 2 : 0;\n              return this.scale(value) + offset;\n            }\n\n          case 'end':\n            {\n              var _offset = this.bandwidth ? this.bandwidth() : 0;\n\n              return this.scale(value) + _offset;\n            }\n\n          default:\n            {\n              return this.scale(value);\n            }\n        }\n      }\n\n      if (bandAware) {\n        var _offset2 = this.bandwidth ? this.bandwidth() / 2 : 0;\n\n        return this.scale(value) + _offset2;\n      }\n\n      return this.scale(value);\n    }\n  }, {\n    key: \"isInRange\",\n    value: function isInRange(value) {\n      var range = this.range();\n      var first = range[0];\n      var last = range[range.length - 1];\n      return first <= last ? value >= first && value <= last : value >= last && value <= first;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(obj) {\n      return new ScaleHelper(obj);\n    }\n  }]);\n\n  return ScaleHelper;\n}();\n\n_defineProperty(ScaleHelper, \"EPS\", 1e-4);\n\nexport var createLabeledScales = function createLabeledScales(options) {\n  var scales = Object.keys(options).reduce(function (res, key) {\n    return _objectSpread(_objectSpread({}, res), {}, _defineProperty({}, key, ScaleHelper.create(options[key])));\n  }, {});\n  return _objectSpread(_objectSpread({}, scales), {}, {\n    apply: function apply(coord) {\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          bandAware = _ref5.bandAware,\n          position = _ref5.position;\n\n      return mapValues(coord, function (value, label) {\n        return scales[label].apply(value, {\n          bandAware: bandAware,\n          position: position\n        });\n      });\n    },\n    isInRange: function isInRange(coord) {\n      return every(coord, function (value, label) {\n        return scales[label].isInRange(value);\n      });\n    }\n  });\n};\n/** Normalizes the angle so that 0 <= angle < 180.\n * @param {number} angle Angle in degrees.\n * @return {number} the normalized angle with a value of at least 0 and never greater or equal to 180. */\n\nexport function normalizeAngle(angle) {\n  return (angle % 180 + 180) % 180;\n}\n/** Calculates the width of the largest horizontal line that fits inside a rectangle that is displayed at an angle.\n * @param {Object} size Width and height of the text in a horizontal position.\n * @param {number} angle Angle in degrees in which the text is displayed.\n * @return {number} The width of the largest horizontal line that fits inside a rectangle that is displayed at an angle.\n */\n\nexport var getAngledRectangleWidth = function getAngledRectangleWidth(_ref6) {\n  var width = _ref6.width,\n      height = _ref6.height;\n  var angle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0; // Ensure angle is >= 0 && < 180\n\n  var normalizedAngle = normalizeAngle(angle);\n  var angleRadians = normalizedAngle * Math.PI / 180;\n  /* Depending on the height and width of the rectangle, we may need to use different formulas to calculate the angled\n   * width. This threshold defines when each formula should kick in. */\n\n  var angleThreshold = Math.atan(height / width);\n  var angledWidth = angleRadians > angleThreshold && angleRadians < Math.PI - angleThreshold ? height / Math.sin(angleRadians) : width / Math.cos(angleRadians);\n  return Math.abs(angledWidth);\n};","map":{"version":3,"sources":["/Users/prayugsigdel/Coding/Trades/node_modules/recharts/es6/util/CartesianUtils.js"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","ownKeys","e","r","t","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","value","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","mapValues","every","getTicksOfScale","parseScale","checkDomainOfScale","getBandSizeOfAxis","findChildByType","getPercentValue","Bar","formatAxisMap","axisMap","offset","axisType","chartName","width","height","layout","children","ids","steps","left","leftMirror","right","rightMirror","top","topMirror","bottom","bottomMirror","hasBar","reduce","result","id","axis","orientation","domain","_axis$padding","padding","mirror","reversed","offsetKey","concat","calculatedPadding","range","x","y","needSpace","type","diff","smallestDistanceBetweenValues","Infinity","sortedValues","categoricalDomain","sort","index","Math","min","smallestDistanceInPercent","rangeWidth","gap","barCategoryGap","halfBand","_parseScale","scale","realScaleType","ticks","finalAxis","bandSize","hide","rectWithPoints","_ref","_ref2","x1","y1","x2","y2","abs","rectWithCoords","_ref3","ScaleHelper","get","bandwidth","_ref4","bandAware","position","_offset","_offset2","isInRange","first","last","create","createLabeledScales","options","scales","coord","_ref5","label","normalizeAngle","angle","getAngledRectangleWidth","_ref6","normalizedAngle","angleRadians","PI","angleThreshold","atan","angledWidth","sin","cos"],"mappings":"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","sourcesContent":["function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport mapValues from 'lodash/mapValues';\nimport every from 'lodash/every';\nimport { getTicksOfScale, parseScale, checkDomainOfScale, getBandSizeOfAxis } from './ChartUtils';\nimport { findChildByType } from './ReactUtils';\nimport { getPercentValue } from './DataUtils';\nimport { Bar } from '../cartesian/Bar';\n\n/**\n * Calculate the scale function, position, width, height of axes\n * @param  {Object} props     Latest props\n * @param  {Object} axisMap   The configuration of axes\n * @param  {Object} offset    The offset of main part in the svg element\n * @param  {String} axisType  The type of axes, x-axis or y-axis\n * @param  {String} chartName The name of chart\n * @return {Object} Configuration\n */\nexport var formatAxisMap = function formatAxisMap(props, axisMap, offset, axisType, chartName) {\n  var width = props.width,\n    height = props.height,\n    layout = props.layout,\n    children = props.children;\n  var ids = Object.keys(axisMap);\n  var steps = {\n    left: offset.left,\n    leftMirror: offset.left,\n    right: width - offset.right,\n    rightMirror: width - offset.right,\n    top: offset.top,\n    topMirror: offset.top,\n    bottom: height - offset.bottom,\n    bottomMirror: height - offset.bottom\n  };\n  var hasBar = !!findChildByType(children, Bar);\n  return ids.reduce(function (result, id) {\n    var axis = axisMap[id];\n    var orientation = axis.orientation,\n      domain = axis.domain,\n      _axis$padding = axis.padding,\n      padding = _axis$padding === void 0 ? {} : _axis$padding,\n      mirror = axis.mirror,\n      reversed = axis.reversed;\n    var offsetKey = \"\".concat(orientation).concat(mirror ? 'Mirror' : '');\n    var calculatedPadding, range, x, y, needSpace;\n    if (axis.type === 'number' && (axis.padding === 'gap' || axis.padding === 'no-gap')) {\n      var diff = domain[1] - domain[0];\n      var smallestDistanceBetweenValues = Infinity;\n      var sortedValues = axis.categoricalDomain.sort();\n      sortedValues.forEach(function (value, index) {\n        if (index > 0) {\n          smallestDistanceBetweenValues = Math.min((value || 0) - (sortedValues[index - 1] || 0), smallestDistanceBetweenValues);\n        }\n      });\n      var smallestDistanceInPercent = smallestDistanceBetweenValues / diff;\n      var rangeWidth = axis.layout === 'vertical' ? offset.height : offset.width;\n      if (axis.padding === 'gap') {\n        calculatedPadding = smallestDistanceInPercent * rangeWidth / 2;\n      }\n      if (axis.padding === 'no-gap') {\n        var gap = getPercentValue(props.barCategoryGap, smallestDistanceInPercent * rangeWidth);\n        var halfBand = smallestDistanceInPercent * rangeWidth / 2;\n        calculatedPadding = halfBand - gap - (halfBand - gap) / rangeWidth * gap;\n      }\n    }\n    if (axisType === 'xAxis') {\n      range = [offset.left + (padding.left || 0) + (calculatedPadding || 0), offset.left + offset.width - (padding.right || 0) - (calculatedPadding || 0)];\n    } else if (axisType === 'yAxis') {\n      range = layout === 'horizontal' ? [offset.top + offset.height - (padding.bottom || 0), offset.top + (padding.top || 0)] : [offset.top + (padding.top || 0) + (calculatedPadding || 0), offset.top + offset.height - (padding.bottom || 0) - (calculatedPadding || 0)];\n    } else {\n      range = axis.range;\n    }\n    if (reversed) {\n      range = [range[1], range[0]];\n    }\n    var _parseScale = parseScale(axis, chartName, hasBar),\n      scale = _parseScale.scale,\n      realScaleType = _parseScale.realScaleType;\n    scale.domain(domain).range(range);\n    checkDomainOfScale(scale);\n    var ticks = getTicksOfScale(scale, _objectSpread(_objectSpread({}, axis), {}, {\n      realScaleType: realScaleType\n    }));\n    if (axisType === 'xAxis') {\n      needSpace = orientation === 'top' && !mirror || orientation === 'bottom' && mirror;\n      x = offset.left;\n      y = steps[offsetKey] - needSpace * axis.height;\n    } else if (axisType === 'yAxis') {\n      needSpace = orientation === 'left' && !mirror || orientation === 'right' && mirror;\n      x = steps[offsetKey] - needSpace * axis.width;\n      y = offset.top;\n    }\n    var finalAxis = _objectSpread(_objectSpread(_objectSpread({}, axis), ticks), {}, {\n      realScaleType: realScaleType,\n      x: x,\n      y: y,\n      scale: scale,\n      width: axisType === 'xAxis' ? offset.width : axis.width,\n      height: axisType === 'yAxis' ? offset.height : axis.height\n    });\n    finalAxis.bandSize = getBandSizeOfAxis(finalAxis, ticks);\n    if (!axis.hide && axisType === 'xAxis') {\n      steps[offsetKey] += (needSpace ? -1 : 1) * finalAxis.height;\n    } else if (!axis.hide) {\n      steps[offsetKey] += (needSpace ? -1 : 1) * finalAxis.width;\n    }\n    return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, id, finalAxis));\n  }, {});\n};\nexport var rectWithPoints = function rectWithPoints(_ref, _ref2) {\n  var x1 = _ref.x,\n    y1 = _ref.y;\n  var x2 = _ref2.x,\n    y2 = _ref2.y;\n  return {\n    x: Math.min(x1, x2),\n    y: Math.min(y1, y2),\n    width: Math.abs(x2 - x1),\n    height: Math.abs(y2 - y1)\n  };\n};\n\n/**\n * Compute the x, y, width, and height of a box from two reference points.\n * @param  {Object} coords     x1, x2, y1, and y2\n * @return {Object} object\n */\nexport var rectWithCoords = function rectWithCoords(_ref3) {\n  var x1 = _ref3.x1,\n    y1 = _ref3.y1,\n    x2 = _ref3.x2,\n    y2 = _ref3.y2;\n  return rectWithPoints({\n    x: x1,\n    y: y1\n  }, {\n    x: x2,\n    y: y2\n  });\n};\nexport var ScaleHelper = /*#__PURE__*/function () {\n  function ScaleHelper(scale) {\n    _classCallCheck(this, ScaleHelper);\n    this.scale = scale;\n  }\n  _createClass(ScaleHelper, [{\n    key: \"domain\",\n    get: function get() {\n      return this.scale.domain;\n    }\n  }, {\n    key: \"range\",\n    get: function get() {\n      return this.scale.range;\n    }\n  }, {\n    key: \"rangeMin\",\n    get: function get() {\n      return this.range()[0];\n    }\n  }, {\n    key: \"rangeMax\",\n    get: function get() {\n      return this.range()[1];\n    }\n  }, {\n    key: \"bandwidth\",\n    get: function get() {\n      return this.scale.bandwidth;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(value) {\n      var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        bandAware = _ref4.bandAware,\n        position = _ref4.position;\n      if (value === undefined) {\n        return undefined;\n      }\n      if (position) {\n        switch (position) {\n          case 'start':\n            {\n              return this.scale(value);\n            }\n          case 'middle':\n            {\n              var offset = this.bandwidth ? this.bandwidth() / 2 : 0;\n              return this.scale(value) + offset;\n            }\n          case 'end':\n            {\n              var _offset = this.bandwidth ? this.bandwidth() : 0;\n              return this.scale(value) + _offset;\n            }\n          default:\n            {\n              return this.scale(value);\n            }\n        }\n      }\n      if (bandAware) {\n        var _offset2 = this.bandwidth ? this.bandwidth() / 2 : 0;\n        return this.scale(value) + _offset2;\n      }\n      return this.scale(value);\n    }\n  }, {\n    key: \"isInRange\",\n    value: function isInRange(value) {\n      var range = this.range();\n      var first = range[0];\n      var last = range[range.length - 1];\n      return first <= last ? value >= first && value <= last : value >= last && value <= first;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(obj) {\n      return new ScaleHelper(obj);\n    }\n  }]);\n  return ScaleHelper;\n}();\n_defineProperty(ScaleHelper, \"EPS\", 1e-4);\nexport var createLabeledScales = function createLabeledScales(options) {\n  var scales = Object.keys(options).reduce(function (res, key) {\n    return _objectSpread(_objectSpread({}, res), {}, _defineProperty({}, key, ScaleHelper.create(options[key])));\n  }, {});\n  return _objectSpread(_objectSpread({}, scales), {}, {\n    apply: function apply(coord) {\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        bandAware = _ref5.bandAware,\n        position = _ref5.position;\n      return mapValues(coord, function (value, label) {\n        return scales[label].apply(value, {\n          bandAware: bandAware,\n          position: position\n        });\n      });\n    },\n    isInRange: function isInRange(coord) {\n      return every(coord, function (value, label) {\n        return scales[label].isInRange(value);\n      });\n    }\n  });\n};\n\n/** Normalizes the angle so that 0 <= angle < 180.\n * @param {number} angle Angle in degrees.\n * @return {number} the normalized angle with a value of at least 0 and never greater or equal to 180. */\nexport function normalizeAngle(angle) {\n  return (angle % 180 + 180) % 180;\n}\n\n/** Calculates the width of the largest horizontal line that fits inside a rectangle that is displayed at an angle.\n * @param {Object} size Width and height of the text in a horizontal position.\n * @param {number} angle Angle in degrees in which the text is displayed.\n * @return {number} The width of the largest horizontal line that fits inside a rectangle that is displayed at an angle.\n */\nexport var getAngledRectangleWidth = function getAngledRectangleWidth(_ref6) {\n  var width = _ref6.width,\n    height = _ref6.height;\n  var angle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Ensure angle is >= 0 && < 180\n  var normalizedAngle = normalizeAngle(angle);\n  var angleRadians = normalizedAngle * Math.PI / 180;\n\n  /* Depending on the height and width of the rectangle, we may need to use different formulas to calculate the angled\n   * width. This threshold defines when each formula should kick in. */\n  var angleThreshold = Math.atan(height / width);\n  var angledWidth = angleRadians > angleThreshold && angleRadians < Math.PI - angleThreshold ? height / Math.sin(angleRadians) : width / Math.cos(angleRadians);\n  return Math.abs(angledWidth);\n};"]},"metadata":{},"sourceType":"module"}